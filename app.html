<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Personal Budget Tracker</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>Personal Budget Tracker</h1>
      <p class="tagline">Keep an eye on your spending, stay within your limits.</p>
      <div id="user-selector">
        <label for="user-select">Select User:</label>
        <select id="user-select">
          <option value="user1">User 1</option>
          <option value="user2">User 2</option>
        </select>
      </div>
    </header>
    <section id="summary">
      <h2>Summary</h2>
      <div class="summary-cards">
        <div class="card">
          <h3>Total Income</h3>
          <p id="total-income">$0.00</p>
        </div>
        <div class="card">
          <h3>Total Expenses</h3>
          <p id="total-expenses">$0.00</p>
        </div>
        <div class="card">
          <h3>Remaining Balance</h3>
          <p id="remaining-balance">$0.00</p>
        </div>
      </div>
    </section>
    <section id="add-income">
      <h2>Add Income</h2>
      <form id="income-form" novalidate>
        <label>
          Amount ($)
          <input type="number" step="0.01" min="0" id="income-amount" placeholder="e.g., 1000" />
        </label>
        <button type="submit">Add Income</button>
      </form>
    </section>
    <section id="add-expense">
      <h2>Add Expense</h2>
      <form id="expense-form" novalidate>
        <label>
          Category
          <input type="text" id="expense-category" placeholder="e.g., Groceries" />
        </label>
        <label>
          Amount ($)
          <input type="number" step="0.01" min="0" id="expense-amount" placeholder="e.g., 45.99" />
        </label>
        <label>
          Note
          <input type="text" id="expense-note" placeholder="Optional description" />
        </label>
        <button type="submit">Add Expense</button>
        <div id="expense-warning" class="warning hidden" role="status" aria-live="polite"></div>
      </form>
    </section>
    <section id="set-limit">
      <h2>Set Category Limit</h2>
      <form id="limit-form" novalidate>
        <label>
          Category
          <input type="text" id="limit-category" placeholder="e.g., Groceries" />
        </label>
        <label>
          Monthly Limit ($)
          <input type="number" step="0.01" min="0" id="limit-amount" placeholder="e.g., 300" />
        </label>
        <button type="submit">Set/Update Limit</button>
      </form>
    </section>
    <section id="categories">
      <h2>Category Overview</h2>
      <table id="categories-table">
        <thead>
          <tr>
            <th>Category</th>
            <th>Spent</th>
            <th>Limit</th>
            <th>Remaining</th>
            <th>Progress</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- Categories will be inserted here dynamically -->
        </tbody>
      </table>
    </section>
    <section id="expenses-list">
      <h2>Expense History</h2>
      <table id="expenses-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Category</th>
            <th>Amount</th>
            <th>Note</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- Expenses will be inserted here dynamically -->
        </tbody>
      </table>
    </section>
    <section id="controls">
      <h2>Controls</h2>
      <button id="reset-spending">Reset Spending Data</button>
      <button id="reset-expenses">Reset Budget Progress</button>
    </section>
  </div>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";
  import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBdpkPurt1_x76tvfTTuwhU0OXQRWwiO-4",
    authDomain: "budget-ef2bf.firebaseapp.com",
    projectId: "budget-ef2bf",
    storageBucket: "budget-ef2bf.firebasestorage.app",
    messagingSenderId: "1016930929149",
    appId: "1:1016930929149:web:d94b1231a56c72d9dbf194",
    measurementId: "G-JLHB0XMHYM"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  await setPersistence(auth, browserLocalPersistence);
  const db = getFirestore(app);


  window.firebaseStuff = { auth, signInWithEmailAndPassword, db, doc, getDoc, setDoc };
</script>

<script src="login.js" type="module" defer></script>

  <script src="script.js" defer></script>
</body>
</html>
